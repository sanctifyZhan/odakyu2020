<html>
<head>
  <title>
    Multimarker Demo
  </title>
  <meta name="Multimarker Demo" >
 

<script src="https://aframe.io/releases/1.0.2/aframe.min.js"></script>
<!-- include ar.js -->
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.0/aframe/build/aframe-ar.js"></script>
<!-- to load .ply model -->
<script src="https://rawgit.com/donmccurdy/aframe-extras/v6.0.1/dist/aframe-extras.loaders.min.js"></script>
<!-- include A-Frame obviously-->
<script>   //Loads multimarker file to localstorage otherwise the area preset will only look for hiro alone
  var a = window.location.toString();
  var file = a.substring(a.indexOf("?") + 1);
  
  var xobj = new XMLHttpRequest();
      xobj.overrideMimeType("application/json");
      if(file==a){
        xobj.open('GET', 'ARjsMultiMarkerFile', true); // 
      }
      else{
        xobj.open('GET', file, true); // 
      }
      xobj.onreadystatechange = function () { 
    if (xobj.readyState == 4 && xobj.status == "200") {
    localStorage.setItem('ARjsMultiMarkerFile',xobj.responseText);
    }};
    xobj.send();
</script>
<script>
AFRAME.registerComponent('model-opacity', {
schema: {default: 1.0},
init: function () {
this.el.addEventListener('model-loaded', this.update.bind(this));
},
update: function () {
var mesh = this.el.getObject3D('mesh');
var data = this.data;
if (!mesh) { return; }
mesh.traverse(function (node) {
  if (node.isMesh) {
    node.material.opacity = data;
    node.material.transparent = data < 1.0;
    node.material.needsUpdate = true;
  }
});
}
});
</script>

  <body>
   
    <a-scene embedded arjs=" debugUIEnabled: false;" vr-mode-ui="enabled: false" >

          <a-marker preset="area">
            <a-light type="ambient" color="white" intensity="1.7"></a-light>
            <a-entity scale="1 1 1">
      
            <a-obj-model src="models/UFO_Bmain.obj"  mtl="models/UFO_Bmain.mtl"  id="UFO_Bmain_28" class="intersectable" scale="2.702703 2.702703 2.702703" position="2.567 -0.63 2.1" rotation="0 0 0" color="#ffffff" transparent=False
            ></a-obj-model> 
            <!--<a-entity obj-model="obj: #base_Asset_obj_10; mtl: #base_Asset_mtl_10" id="base_10" class="intersectable" scale="0.01 0.01000001 0.01000001" position="0.177 0 -0.341" rotation="270 0 0" color="#ffffff" transparent="False"
            ></a-obj-model>-->
          </a-entity>
                
              </a-marker>
              <a-entity camera position="0 0 0"></a-obj-model>
            </a-scene>
            </body>
            </html>